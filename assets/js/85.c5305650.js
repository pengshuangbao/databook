(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{545:function(e,a,t){"use strict";t.r(a);var r=t(14),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"开源动态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开源动态"}},[e._v("#")]),e._v(" 开源动态")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#发布历史"}},[e._v("发布历史")]),t("ul",[t("li",[t("a",{attrs:{href:"#flink-1-8-0"}},[e._v("Flink 1.8.0")])]),t("li",[t("a",{attrs:{href:"#flink-1-9-0"}},[e._v("Flink 1.9.0")])])])]),t("li",[t("a",{attrs:{href:"#feature"}},[e._v("Feature")]),t("ul",[t("li",[t("a",{attrs:{href:"#flink-9187-add-prometheus-pushgateway-reporter-asf-jira-https-issues-apache-org-jira-browse-flink-9187"}},[e._v("[[FLINK-9187] add prometheus pushgateway reporter - ASF JIRA](https://issues.apache.org/jira/browse/FLINK-9187)")])]),t("li",[t("a",{attrs:{href:"#flip-44-support-local-aggregation-in-flink-apache-flink-apache-software-foundation-https-cwiki-apache-org-confluence-display-flink-flip-44-3a-support-local-aggregation-in-flink"}},[e._v("[FLIP-44: Support Local Aggregation in Flink - Apache Flink - Apache Software Foundation](https://cwiki.apache.org/confluence/display/FLINK/FLIP-44%3A+Support+Local+Aggregation+in+Flink)")])])])]),t("li",[t("a",{attrs:{href:"#releases"}},[e._v("Releases")])]),t("li",[t("a",{attrs:{href:"#bugs"}},[e._v("Bugs")]),t("ul",[t("li",[t("a",{attrs:{href:"#flink-11457-prometheuspushgatewayreporter-does-not-cleanup-its-metrics-asf-jira-https-issues-apache-org-jira-browse-flink-11457"}},[e._v("[[**FLINK-11457**] PrometheusPushGatewayReporter does not cleanup its metrics - ASF JIRA](https://issues.apache.org/jira/browse/FLINK-11457)")])]),t("li",[t("a",{attrs:{href:"#apache-flink-中文用户邮件列表-prometheus-pushgateway-监控-flink-metrics的问题-http-apache-flink-147419-n8-nabble-com-prometheus-pushgateway-flink-metrics-td3028-html-a3032"}},[e._v("[Apache Flink 中文用户邮件列表 - Prometheus pushgateway 监控 Flink metrics的问题](http://apache-flink.147419.n8.nabble.com/Prometheus-pushgateway-Flink-metrics-td3028.html#a3032)")])]),t("li",[t("a",{attrs:{href:"#flink-13787-prometheuspushgatewayreporter-does-not-cleanup-tm-metrics-when-run-on-kubernetes-asf-jira-https-issues-apache-org-jira-browse-flink-13787"}},[e._v("[[FLINK-13787] PrometheusPushGatewayReporter does not cleanup TM metrics when run on kubernetes - ASF JIRA](https://issues.apache.org/jira/browse/FLINK-13787)")])])])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"发布历史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布历史"}},[e._v("#")]),e._v(" 发布历史")]),e._v(" "),t("h3",{attrs:{id:"flink-1-8-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-1-8-0"}},[e._v("#")]),e._v(" Flink 1.8.0")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://flink.apache.org/news/2019/04/09/release-1.8.0.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Flink: Apache Flink 1.8.0 Release Announcement"),t("OutboundLink")],1)]),e._v(" "),t("ol",[t("li",[e._v("状态\n"),t("ol",[t("li",[e._v("连续增量的清理过期的 state 数据")]),e._v(" "),t("li",[e._v("状态恢复时的 schema 兼容性更强")]),e._v(" "),t("li",[e._v("Savepoint 兼容性")])])]),e._v(" "),t("li",[e._v("maven\n"),t("ol",[t("li",[e._v("Flink 不再提供捆绑 Hadoop 包的发行版本")])])]),e._v(" "),t("li",[e._v("Connectors (连接器)\n"),t("ol",[t("li",[e._v("增加 KafkaDeserializationSchema 能直接获取 kafka ConsumerRecord")]),e._v(" "),t("li",[e._v("FlinkKafkaConsumer 将从恢复的数据中过滤不属于当前 topic 的 partition")])])])]),e._v(" "),t("h3",{attrs:{id:"flink-1-9-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-1-9-0"}},[e._v("#")]),e._v(" Flink 1.9.0")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://flink.apache.org/news/2019/08/22/release-1.9.0.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Flink: Apache Flink 1.9.0 Release Announcement"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("The Apache Flink project’s goal is to develop a stream processing system to unify and power many forms of real-time and offline data processing applications as well as event-driven applications. In this release, we have made a huge step forward in that effort, by integrating Flink’s stream and batch processing capabilities under a single, unified runtime.")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Fine-grained Batch Recovery (FLIP-1)")])]),e._v(" "),t("li",[t("ol",[t("li",[e._v("Until Flink 1.9, task failures in batch jobs were recovered by canceling all tasks and restarting the whole job")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/FLINK/FLIP-1+%3A+Fine+Grained+Recovery+from+Task+Failures",target:"_blank",rel:"noopener noreferrer"}},[e._v("FLIP-1 : Fine Grained Recovery from Task Failures - Apache Flink - Apache Software Foundation"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[t("p",[e._v("State Processor API (FLIP-43)")])]),e._v(" "),t("li",[t("p",[e._v("Stop-with-Savepoint (FLIP-34)")]),e._v(" "),t("ol",[t("li",[t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("bin/flink stop -p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(":targetDirectory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" :jobId\n")])])])])])]),e._v(" "),t("li",[t("p",[e._v("Preview of the new Blink SQL Query Processor")]),e._v(" "),t("ol",[t("li",[t("img",{attrs:{src:"https://static.lovedata.net/21-05-11-f4af23278e40eea0cfb6ae433d22ee64.png",alt:"image"}})])])]),e._v(" "),t("li",[t("p",[e._v("Other Improvements to the Table API and SQL")]),e._v(" "),t("ol",[t("li",[e._v("Scala-free Table API and SQL for Java users (FLIP-32)")]),e._v(" "),t("li",[e._v("Rework of the Table API Type System (FLIP-37)")])])]),e._v(" "),t("li",[t("p",[e._v("Preview of Full Hive Integration (FLINK-10556)")]),e._v(" "),t("ol",[t("li",[e._v("you will also be able to persist metadata of Flink tables in Metastore")])])])]),e._v(" "),t("h2",{attrs:{id:"feature"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#feature"}},[e._v("#")]),e._v(" Feature")]),e._v(" "),t("h3",{attrs:{id:"flink-9187-add-prometheus-pushgateway-reporter-asf-jira"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-9187-add-prometheus-pushgateway-reporter-asf-jira"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://issues.apache.org/jira/browse/FLINK-9187",target:"_blank",rel:"noopener noreferrer"}},[e._v("[FLINK-9187] add prometheus pushgateway reporter - ASF JIRA"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"flip-44-support-local-aggregation-in-flink-apache-flink-apache-software-foundation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flip-44-support-local-aggregation-in-flink-apache-flink-apache-software-foundation"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://cwiki.apache.org/confluence/display/FLINK/FLIP-44%3A+Support+Local+Aggregation+in+Flink",target:"_blank",rel:"noopener noreferrer"}},[e._v("FLIP-44: Support Local Aggregation in Flink - Apache Flink - Apache Software Foundation"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"releases"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#releases"}},[e._v("#")]),e._v(" Releases")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://my.oschina.net/u/4372568/blog/4783300",target:"_blank",rel:"noopener noreferrer"}},[e._v("Flink 1.12 Release 文档解读 - osc_zyjrm8ih的个人空间 - OSCHINA - 中文开源技术交流社区"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"bugs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bugs"}},[e._v("#")]),e._v(" Bugs")]),e._v(" "),t("h3",{attrs:{id:"flink-11457-prometheuspushgatewayreporter-does-not-cleanup-its-metrics-asf-jira"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-11457-prometheuspushgatewayreporter-does-not-cleanup-its-metrics-asf-jira"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://issues.apache.org/jira/browse/FLINK-11457",target:"_blank",rel:"noopener noreferrer"}},[e._v("["),t("strong",[e._v("FLINK-11457")]),e._v("] PrometheusPushGatewayReporter does not cleanup its metrics - ASF JIRA"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[e._v("描述")])]),e._v(" "),t("p",[e._v("取消在基于yarn-cluster的群集上运行的作业，然后关闭群集时，不会删除推送网关上的指标*")]),e._v(" "),t("ul",[t("li",[e._v("结论")])]),e._v(" "),t("p",[e._v("通过调度程序来删除pushgateway上面的指标")]),e._v(" "),t("p",[e._v("In our product env, we also met the same problem. If pushgateway can implements "),t("code",[e._v("TTL for pushed metrics")]),e._v("[1], it'll very useful. But for now, we use a external schedule system to check whether the flink job is alive or not, then delete metrics by pushgateway's rest api[2].")]),e._v(" "),t("p",[e._v("[1]https://github.com/prometheus/pushgateway/issues/19")]),e._v(" "),t("p",[e._v("[2]https://github.com/prometheus/pushgateway#delete-method")]),e._v(" "),t("h3",{attrs:{id:"apache-flink-中文用户邮件列表-prometheus-pushgateway-监控-flink-metrics的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apache-flink-中文用户邮件列表-prometheus-pushgateway-监控-flink-metrics的问题"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"http://apache-flink.147419.n8.nabble.com/Prometheus-pushgateway-Flink-metrics-td3028.html#a3032",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Flink 中文用户邮件列表 - Prometheus pushgateway 监控 Flink metrics的问题"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[t("p",[e._v("描述")]),e._v(" "),t("p",[e._v("flink上报指标到pushgateway，然后被prometheus拉取，grafana做展示显示异常，断断续续")])]),e._v(" "),t("li",[t("p",[e._v("相同问题")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://apache-flink.147419.n8.nabble.com/Prometheus-Pushgateway-Flink-td3041.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Flink 中文用户邮件列表 - Prometheus Pushgateway 监控 Flink 问题"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[t("p",[e._v("结论")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/daijiguo/article/details/105453643",target:"_blank",rel:"noopener noreferrer"}},[e._v("Flink问题：记Flink Metrics时断时续问题排查_大数据_cheegoday的专栏-CSDN博客"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("这个用户修改了源码。 他的描述")])])]),e._v(" "),t("blockquote",[t("p",[e._v("虽然我们所用到的flink taskmanager metrics指标发生了中断，但是可以看到pushgateway中的flink jobmanager metrics都还在，且taskmanager metrics存在时，无法查到jobmanager metrics，jobmanager metrics存在时，无法查到taskmanager metrics，两者虽然处于同一个group（pushgateway中的概念，与推送URL相关）下，但是貌似无法同时查到")]),e._v(" "),t("p",[e._v("意即，如果以group为单位使用put方法往pushgateway发数据，则新数据会全盘覆盖老数据，不管metrics name是否相同；如果以group为单位使用post方法往pushgateway发数据，则同一metrics name的新数据会覆盖老数据。根据实验中jobmanager metrics和taskmanager metrics不能兼容的现象，很合理地猜测，当我们所需要的taskmanager metrics消失时，是因为jobmanager metrics使用了PUT的指标推送方式而将taskmanager metrics全盘覆盖了")])]),e._v(" "),t("ul",[t("li",[e._v("根据 "),t("a",{attrs:{href:"http://apache-flink.147419.n8.nabble.com/Prometheus-Pushgateway-Flink-td3041.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Flink 中文用户邮件列表 - Prometheus Pushgateway 监控 Flink 问题"),t("OutboundLink")],1),e._v("  设置 randomSuffix为true")])])])]),e._v(" "),t("h3",{attrs:{id:"flink-13787-prometheuspushgatewayreporter-does-not-cleanup-tm-metrics-when-run-on-kubernetes-asf-jira"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flink-13787-prometheuspushgatewayreporter-does-not-cleanup-tm-metrics-when-run-on-kubernetes-asf-jira"}},[e._v("#")]),e._v(" "),t("a",{attrs:{href:"https://issues.apache.org/jira/browse/FLINK-13787",target:"_blank",rel:"noopener noreferrer"}},[e._v("[FLINK-13787] PrometheusPushGatewayReporter does not cleanup TM metrics when run on kubernetes - ASF JIRA"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[e._v("同问题1")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/54420498/flink-prometheus-push-gateway-reporter-delete-metrics-on-job-shutdown",target:"_blank",rel:"noopener noreferrer"}},[e._v("hadoop - Flink Prometheus Push Gateway Reporter - Delete Metrics on Job Shutdown - Stack Overflow"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{590:function(t,a,s){"use strict";s.r(a);var v=s(14),e=Object(v.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"磁盘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#磁盘"}},[t._v("#")]),t._v(" 磁盘")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#基础知识"}},[t._v("基础知识")]),s("ul",[s("li",[s("a",{attrs:{href:"#概念"}},[t._v("概念")]),s("ul",[s("li",[s("a",{attrs:{href:"#一切都是文件"}},[t._v("一切都是文件")])]),s("li",[s("a",{attrs:{href:"#文件目录布局"}},[t._v("文件目录布局")])]),s("li",[s("a",{attrs:{href:"#物理设备命名规则"}},[t._v("物理设备命名规则")])]),s("li",[s("a",{attrs:{href:"#主分区、扩展分区、逻辑分区的概念"}},[t._v("主分区、扩展分区、逻辑分区的概念")])])])]),s("li",[s("a",{attrs:{href:"#文件系统与数据资料"}},[t._v("文件系统与数据资料")]),s("ul",[s("li",[s("a",{attrs:{href:"#ext3"}},[t._v("Ext3")])]),s("li",[s("a",{attrs:{href:"#ext4"}},[t._v("Ext4")])]),s("li",[s("a",{attrs:{href:"#xfs"}},[t._v("XFS")])])])])])]),s("li",[s("a",{attrs:{href:"#挂载硬件设备"}},[t._v("挂载硬件设备")]),s("ul",[s("li",[s("a",{attrs:{href:"#mount命令"}},[t._v("mount命令")])]),s("li",[s("a",{attrs:{href:"#unmout"}},[t._v("unmout")])]),s("li",[s("a",{attrs:{href:"#fdisk"}},[t._v("fdisk")])]),s("li",[s("a",{attrs:{href:"#parted"}},[t._v("parted")])])])]),s("li",[s("a",{attrs:{href:"#逻辑卷管理"}},[t._v("逻辑卷管理")]),s("ul",[s("li",[s("a",{attrs:{href:"#逻辑卷管理详解"}},[t._v("逻辑卷管理详解")]),s("ul",[s("li",[s("a",{attrs:{href:"#lvm基本术语"}},[t._v("LVM基本术语")])])])]),s("li",[s("a",{attrs:{href:"#linux就该这么学"}},[t._v("Linux就该这么学")]),s("ul",[s("li",[s("a",{attrs:{href:"#核心概念"}},[t._v("核心概念")])])])]),s("li",[s("a",{attrs:{href:"#lvm常用步骤"}},[t._v("LVM常用步骤")]),s("ul",[s("li",[s("a",{attrs:{href:"#第一步-让新添加的两块硬盘设备支持lvm技术。"}},[t._v("第一步 让新添加的两块硬盘设备支持LVM技术。")])]),s("li",[s("a",{attrs:{href:"#第二步-把两块硬盘设备加入到storage卷组中-然后查看卷组的状态。"}},[t._v("第二步 把两块硬盘设备加入到storage卷组中，然后查看卷组的状态。")])]),s("li",[s("a",{attrs:{href:"#第三步-第3步-切割出一个约为150mb的逻辑卷设备。"}},[t._v("第三步 第3步：切割出一个约为150MB的逻辑卷设备。")])]),s("li",[s("a",{attrs:{href:"#第4步-把生成好的逻辑卷进行格式化-然后挂载使用"}},[t._v("第4步：把生成好的逻辑卷进行格式化，然后挂载使用")])]),s("li",[s("a",{attrs:{href:"#第5步-查看挂载状态-并写入到配置文件-使其永久生效"}},[t._v("第5步：查看挂载状态，并写入到配置文件，使其永久生效")])])])]),s("li",[s("a",{attrs:{href:"#lvm扩容"}},[t._v("LVM扩容")]),s("ul",[s("li",[s("a",{attrs:{href:"#第一步-把上一个实验的逻辑卷扩容到290mb"}},[t._v("第一步 把上一个实验的逻辑卷扩容到290MB")])]),s("li",[s("a",{attrs:{href:"#第二步-检查硬盘完整性-并充值硬盘容量"}},[t._v("第二步  检查硬盘完整性，并充值硬盘容量")])]),s("li",[s("a",{attrs:{href:"#第三步-重新挂载硬盘设备并检查挂载状态"}},[t._v("第三步 重新挂载硬盘设备并检查挂载状态")])])])]),s("li",[s("a",{attrs:{href:"#lvm缩容"}},[t._v("LVM缩容")]),s("ul",[s("li",[s("a",{attrs:{href:"#第1步-检查文件系统的完整性。"}},[t._v("第1步：检查文件系统的完整性。")])]),s("li",[s("a",{attrs:{href:"#第2步-把逻辑卷vo的容量减小到120mb。"}},[t._v("第2步：把逻辑卷vo的容量减小到120MB。")])]),s("li",[s("a",{attrs:{href:"#第3步-重新挂在磁盘检查状态"}},[t._v("第3步 重新挂在磁盘检查状态")])])])])])]),s("li",[s("a",{attrs:{href:"#raid-独立冗余磁盘阵列"}},[t._v("RAID(独立冗余磁盘阵列)")]),s("ul",[s("li",[s("a",{attrs:{href:"#由来"}},[t._v("由来")])]),s("li",[s("a",{attrs:{href:"#raid-0"}},[t._v("RAID 0")])]),s("li",[s("a",{attrs:{href:"#raid1"}},[t._v("RAID1")])]),s("li",[s("a",{attrs:{href:"#raid5"}},[t._v("RAID5")])]),s("li",[s("a",{attrs:{href:"#raid10"}},[t._v("RAID10")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[t._v("#")]),t._v(" 基础知识")]),t._v(" "),s("h3",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),s("blockquote",[s("p",[t._v("引用自《Linux就该这么学》")])]),t._v(" "),s("h4",{attrs:{id:"一切都是文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一切都是文件"}},[t._v("#")]),t._v(" 一切都是文件")]),t._v(" "),s("p",[t._v("在Linux系统中，目录、字符设备、块设备、套接字、打印机等都被抽象成了文件，“Linux系统中一切都是文件”。")]),t._v(" "),s("h4",{attrs:{id:"文件目录布局"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件目录布局"}},[t._v("#")]),t._v(" 文件目录布局")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-f7a0d02957172dfde60610e6e4a1f4a5.png",alt:"image"}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("目录名称")]),t._v(" "),s("th",[t._v("应防止文件内容")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("/boot")]),t._v(" "),s("td",[t._v("开机所需文件——内核、开机菜单以及所需配置文件等")])]),t._v(" "),s("tr",[s("td",[t._v("/dev")]),t._v(" "),s("td",[t._v("以文件形式存放任何设备与接口")])]),t._v(" "),s("tr",[s("td",[t._v("/etc")]),t._v(" "),s("td",[t._v("配置文件")])]),t._v(" "),s("tr",[s("td",[t._v("/home")]),t._v(" "),s("td",[t._v("用户家目录")])]),t._v(" "),s("tr",[s("td",[t._v("/bin")]),t._v(" "),s("td",[t._v("存放但用户模式下还可以操作的命令")])]),t._v(" "),s("tr",[s("td",[t._v("/lib")]),t._v(" "),s("td",[t._v("开机时用到的函数库，以及/bin与/sbin下面的命令要调用的函数")])]),t._v(" "),s("tr",[s("td",[t._v("/sbin")]),t._v(" "),s("td",[t._v("开机过程中需要的命令")])]),t._v(" "),s("tr",[s("td",[t._v("/media")]),t._v(" "),s("td",[t._v("用于挂载设备文件的目录")])]),t._v(" "),s("tr",[s("td",[t._v("/opt")]),t._v(" "),s("td",[t._v("放置第三方的软件")])]),t._v(" "),s("tr",[s("td",[t._v("/root")]),t._v(" "),s("td",[t._v("系统管理员的家目录")])]),t._v(" "),s("tr",[s("td",[t._v("/srv")]),t._v(" "),s("td",[t._v("一些网络服务的数据文件目录")])]),t._v(" "),s("tr",[s("td",[t._v("/tmp")]),t._v(" "),s("td",[t._v("任何人均可使用的“共享”临时目录")])]),t._v(" "),s("tr",[s("td",[t._v("/proc")]),t._v(" "),s("td",[t._v("虚拟文件系统，例如系统内核、进程、外部设备及网络状态等")])]),t._v(" "),s("tr",[s("td",[t._v("/usr/local")]),t._v(" "),s("td",[t._v("用户自行安装的软件")])]),t._v(" "),s("tr",[s("td",[t._v("/usr/sbin")]),t._v(" "),s("td",[t._v("Linux系统开机时不会使用到的软件/命令/脚本")])]),t._v(" "),s("tr",[s("td",[t._v("/usr/share")]),t._v(" "),s("td",[t._v("帮助与说明文件，也可放置共享文件")])]),t._v(" "),s("tr",[s("td",[t._v("/var")]),t._v(" "),s("td",[t._v("主要存放经常变化的文件，如日志")])]),t._v(" "),s("tr",[s("td",[t._v("/lost+found")]),t._v(" "),s("td",[t._v("当文件系统发生错误时，将一些丢失的文件片段存放在这里")])])])]),t._v(" "),s("h4",{attrs:{id:"物理设备命名规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#物理设备命名规则"}},[t._v("#")]),t._v(" 物理设备命名规则")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-9fbf48484a3d89da03bc1d223fdc4447.png",alt:"image"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-14c29ec0229b8f17e2e2d4652f517bb1.png",alt:"image"}})]),t._v(" "),s("blockquote",[s("p",[t._v("“/dev/sda5”表示的就是“这是系统中第一块被识别到的硬件设备中分区编号为5的逻辑分区的设备文件”。")])]),t._v(" "),s("h4",{attrs:{id:"主分区、扩展分区、逻辑分区的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主分区、扩展分区、逻辑分区的概念"}},[t._v("#")]),t._v(" 主分区、扩展分区、逻辑分区的概念")]),t._v(" "),s("p",[t._v("硬盘设备是由大量的扇区组成的，"),s("strong",[t._v("每个扇区的容量为512字节")]),t._v("。其中第一个扇区最重要，它里面保存着主引导记录与分区表信息。就第一个扇区来讲，"),s("strong",[t._v("主引导记录需要占用446字节")]),t._v("，分区表为64字节，结束符占用2字节；其中分区表中每记录一个分区信息就需要16字节，这样一来最多只有4个分区信息可以写到第一个扇区中，这4个分区就是4个主分区。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-aca629948b385b3009413563c2e88a2b.png",alt:"image"}})]),t._v(" "),s("p",[t._v("那么问题来了——第一个扇区最多只能创建出4个分区？于是为了解决分区个数不够的问题，可以将第一个扇区的分区表中16字节（原本要写入主分区信息）的空间（称之为扩展分区）拿出来指向另外一个分区。也就是说，扩展分区其实并不是一个真正的分区，而更像是一个占用16字节分区表空间的指针——一个指向另外一个分区的指针。这样一来，用户一般会选择使用3个主分区加1个扩展分区的方法，然后在扩展分区中创建出数个逻辑分区，从而来满足多分区（大于4个）的需求。当然，就目前来讲大家只要明白为什么主分区不能超过4个就足够了。主分区、扩展分区、逻辑分区可以像图64那样来规划。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-7b1140347289b83ce35e1438d99bb2d2.png",alt:"image"}})]),t._v(" "),s("h3",{attrs:{id:"文件系统与数据资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件系统与数据资料"}},[t._v("#")]),t._v(" 文件系统与数据资料")]),t._v(" "),s("blockquote",[s("p",[t._v("文件 创建删除修改都是依靠"),s("strong",[t._v("文件系统")]),t._v("完成的，常见如下")])]),t._v(" "),s("h4",{attrs:{id:"ext3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ext3"}},[t._v("#")]),t._v(" Ext3")]),t._v(" "),s("p",[t._v("​\t日志文件系统 避免系统异常当即文件丢失，自动修复数据，磁盘越大，修复时间越长，不能百分百保证。")]),t._v(" "),s("p",[t._v("​\t会预记录每个吸入动作，，以便能够追溯")]),t._v(" "),s("h4",{attrs:{id:"ext4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ext4"}},[t._v("#")]),t._v(" Ext4")]),t._v(" "),s("p",[t._v("​\tExt3的改进版本，是RHEL6系统默认文件系统。最高1EB，无限子目录，速度搞")]),t._v(" "),s("h4",{attrs:{id:"xfs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xfs"}},[t._v("#")]),t._v(" XFS")]),t._v(" "),s("p",[t._v("高性能 ，而且是RHEL7中默认的文件管理系统 ，优势：系统宕机后快速修复可能被破坏的文件。最大18EB")]),t._v(" "),s("blockquote",[s("p",[t._v("拿到一个硬盘，首先进行分区，然后再格式化文件系统，才能挂载正常使用。")]),t._v(" "),s("p",[t._v("硬盘分区操作取决于需求和硬盘大小")]),t._v(" "),s("p",[t._v("也可以不分区，但必须格式化")])]),t._v(" "),s("h2",{attrs:{id:"挂载硬件设备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载硬件设备"}},[t._v("#")]),t._v(" 挂载硬件设备")]),t._v(" "),s("h3",{attrs:{id:"mount命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mount命令"}},[t._v("#")]),t._v(" mount命令")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" 文件系统 挂载目录\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" /dev/sdb2 /backup\n")])])]),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-0dc688da754a09f44dc89d777b107258.png",alt:"image"}})]),t._v(" "),s("blockquote",[s("p",[t._v("mount之后能立即使用了，重启后挂载失效，每次启动都要手动挂载一下。\\")]),t._v(" "),s("p",[t._v('必须把挂载信息按照指定格式。"设备文件 挂载目录 格式类型。权限选项 自检 优先级" 写入到 /tc/fstab 文件中')])]),t._v(" "),s("p",[t._v("用于挂载信息的指定填写格式中，各字段所表示的意义")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("字段")]),t._v(" "),s("th",[t._v("意义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("设备文件")]),t._v(" "),s("td",[t._v("一般为设备的路径+设备名称，也可以写唯一识别码（UUID，UniversallyUniqueIdentifier")])]),t._v(" "),s("tr",[s("td",[t._v("挂载目录")]),t._v(" "),s("td",[t._v("指定要挂载到的目录，需在挂载前创建好")])]),t._v(" "),s("tr",[s("td",[t._v("格式类型")]),t._v(" "),s("td",[t._v("指定文件系统的格式，比如Ext3、Ext4、XFS、SWAP、iso9660（此为光盘设备）等")])]),t._v(" "),s("tr",[s("td",[t._v("权限选项")]),t._v(" "),s("td",[t._v("若设置为defaults，则默认权限为：rw,suid,dev,exec,auto,nouser,async")])]),t._v(" "),s("tr",[s("td",[t._v("自检")]),t._v(" "),s("td",[t._v("若为1则开机后进行磁盘自检，为0则不自检查")])]),t._v(" "),s("tr",[s("td",[t._v("优先级")]),t._v(" "),s("td",[t._v("若“自检”为1，则可对多块磁盘进行自检设置优先级")])])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/fstab\n/dev/sdb2 \t\t/backup ext4 defaults "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])]),s("h3",{attrs:{id:"unmout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unmout"}},[t._v("#")]),t._v(" unmout")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /dev/sdb2\n")])])]),s("h3",{attrs:{id:"fdisk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fdisk"}},[t._v("#")]),t._v(" fdisk")]),t._v(" "),s("p",[t._v("fdisk命令中的参数和作用")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-4502bc81edaf42d6d24cd20dd1ba3d9a.png",alt:"image"}})]),t._v(" "),s("p",[t._v("使用fdisk命令来尝试管理/dev/sdb硬盘设备")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fdisk")]),t._v(" /dev/sdb\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入p查看已经有的分区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入n 来创建分区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入 p 来创建主分区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提示输入分区编号，主分区默认是 1-4，所以回车")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提示输入起始的扇区编号，直接回车")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入最后一个分区的位置 +size{K,M,G} 输入 +2G")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在使用p查看分区信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" /dev/sdb1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看文件属性信息")]),t._v("\npartprobe "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同步文件信息到内核")]),t._v("\nmkfs.xfs /dev/sdb1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 格式化分区为XFS文件系统")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /newFS\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" /dev/sdb1 /newFS\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h\n")])])]),s("h3",{attrs:{id:"parted"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parted"}},[t._v("#")]),t._v(" parted")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/dufufd/article/details/53508367",target:"_blank",rel:"noopener noreferrer"}},[t._v("分区工具parted的详解及常用分区使用方法_伏虎游侠的博客-CSDN博客"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"逻辑卷管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷管理"}},[t._v("#")]),t._v(" 逻辑卷管理")]),t._v(" "),s("h3",{attrs:{id:"逻辑卷管理详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷管理详解"}},[t._v("#")]),t._v(" 逻辑卷管理详解")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/lenovouser/article/details/54233570",target:"_blank",rel:"noopener noreferrer"}},[t._v("LVM原理及PV、VG、LV、PE、LE关系图_北极星的专栏-CSDN博客_lvm pe"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("在"),s("strong",[t._v("零停机")]),t._v("前提下可以自如对文件系统的大小进行调整，可以方便实现文件系统跨越不同磁盘和分区。那么我们可以通过逻辑盘卷管理（LVM，Logical Volume Manager）的方式来非常完美的实现这一功能。")]),t._v(" "),s("ul",[s("li",[t._v("LVM是逻辑盘卷管理（Logical Volume Manager） 一种磁盘管理工具")]),t._v(" "),s("li",[t._v("LVM是建立在硬盘和分区之上的一个逻辑层，来提高磁盘分区管理的灵活性")]),t._v(" "),s("li",[t._v("能够实现\n"),s("ul",[s("li",[t._v("若干个磁盘分区连接为一个整块的卷组（volume group）形成一个存储池")]),t._v(" "),s("li",[t._v("在卷组上随意创建逻辑卷组（logical volumes）")]),t._v(" "),s("li",[t._v("并进一步在逻辑卷组上创建文件系统")]),t._v(" "),s("li",[t._v("管理员通过LVM可以方便的调整存储卷组的大小")]),t._v(" "),s("li",[t._v("对磁盘存储按照组的方式进行命名、管理和分配 随便取名字 比如 DBData 而不是使用 sda sdb")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-06-7f984fae6c53848f218010bc6aa4172c.png",alt:"image"}})]),t._v(" "),s("h4",{attrs:{id:"lvm基本术语"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lvm基本术语"}},[t._v("#")]),t._v(" LVM基本术语")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("物理存储介质（The physical media）指硬盘")])]),t._v(" "),s("li",[s("p",[t._v("物理卷(physical volume)")]),t._v(" "),s("ol",[s("li",[t._v("物理卷就是指硬盘分区或从逻辑上与磁盘分区具有同样功能的设备(如RAID)，是LVM的基本存储逻辑块")])])]),t._v(" "),s("li",[s("p",[t._v("卷组（Volume Group）")]),t._v(" "),s("ol",[s("li",[t._v("LVM卷组类似于非LVM系统中的物理硬盘，其由物理卷组成。")]),t._v(" "),s("li",[t._v("可以在卷组上建立多个LVM分区（逻辑卷）")]),t._v(" "),s("li",[t._v("LVM卷组有一个或多个物理卷组成")])])]),t._v(" "),s("li",[s("p",[t._v("逻辑卷（Logicalvolume）")]),t._v(" "),s("ol",[s("li",[t._v("LVM的逻辑卷类似于非LVM系统中的硬盘分区")])])]),t._v(" "),s("li",[s("p",[t._v("PE（physical extent）")]),t._v(" "),s("ol",[s("li",[t._v("物理卷被划分为称为PE(Physical Extents)的基本单元")]),t._v(" "),s("li",[t._v("有编号，PE是可以被LVM寻址的最小单元，可配置 默认 4MB")])])]),t._v(" "),s("li",[s("p",[t._v("LE（logical extent）")]),t._v(" "),s("ol",[s("li",[t._v("逻辑卷也被分成为LE的可被寻址的基本单位")]),t._v(" "),s("li",[t._v("同一个卷组与PE大小相同，一一对应")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-06-c50f972ab1c65e6a1ce9a108208721af.png",alt:"image"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-06-fe7583ce01b4e7d8b6fa3dd62e605307.png",alt:"image"}})])])]),t._v(" "),s("p",[t._v("磁盘分区、卷组、逻辑卷和文件系统之间的逻辑关系的示意图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-06-2d3436190f33b215a4d3379367adb0a3.png",alt:"image"}})]),t._v(" "),s("h3",{attrs:{id:"linux就该这么学"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux就该这么学"}},[t._v("#")]),t._v(" Linux就该这么学")]),t._v(" "),s("p",[t._v("LVM可以允许用户对硬盘资源进行动态调整")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-15-2dbd4d2ecc34827ee3058a550cde1029.png",alt:"image"}})]),t._v(" "),s("h4",{attrs:{id:"核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[t._v("#")]),t._v(" 核心概念")]),t._v(" "),s("p",[s("strong",[t._v("物理卷")]),t._v("处于LVM中的最底层，可以将其理解为物理硬盘、硬盘分区或者RAID磁盘阵列，这都可以。卷组建立在物理卷之上，"),s("strong",[t._v("一个卷组可以包含多个物理卷")]),t._v("，而且在卷组创建之后也可以继续向其中添加新的物理卷。逻辑卷是用卷组中空闲的资源建立的，并且逻辑卷在建立后可以动态地扩展或缩小空间")]),t._v(" "),s("h3",{attrs:{id:"lvm常用步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lvm常用步骤"}},[t._v("#")]),t._v(" LVM常用步骤")]),t._v(" "),s("h4",{attrs:{id:"第一步-让新添加的两块硬盘设备支持lvm技术。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-让新添加的两块硬盘设备支持lvm技术。"}},[t._v("#")]),t._v(" 第一步 让新添加的两块硬盘设备支持LVM技术。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("pvcreate/dev/sdb/dev/sdc\n")])])]),s("h4",{attrs:{id:"第二步-把两块硬盘设备加入到storage卷组中-然后查看卷组的状态。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-把两块硬盘设备加入到storage卷组中-然后查看卷组的状态。"}},[t._v("#")]),t._v(" 第二步 把两块硬盘设备加入到storage卷组中，然后查看卷组的状态。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("vgcreatestorage/dev/sdb/dev/sdc\nvgdisplay\n")])])]),s("h4",{attrs:{id:"第三步-第3步-切割出一个约为150mb的逻辑卷设备。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-第3步-切割出一个约为150mb的逻辑卷设备。"}},[t._v("#")]),t._v(" 第三步 第3步：切割出一个约为150MB的逻辑卷设备。")]),t._v(" "),s("blockquote",[s("p",[t._v("两种计量单位")]),t._v(" "),s("ol",[s("li",[t._v("以容量单位 -L 如 -L 150M 生成一个150M的逻辑卷")]),t._v(" "),s("li",[t._v("以个数为单位，-l 每个基本单元的大小默认为4MB，例如 -l37 生成 37X4MB=148MB的逻辑卷")])])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("lvcreate -n vo -l "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v(" storage\nlvdisplay\n")])])]),s("h4",{attrs:{id:"第4步-把生成好的逻辑卷进行格式化-然后挂载使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第4步-把生成好的逻辑卷进行格式化-然后挂载使用"}},[t._v("#")]),t._v(" 第4步：把生成好的逻辑卷进行格式化，然后挂载使用")]),t._v(" "),s("blockquote",[s("p",[t._v("Linux系统会把LVM中的逻辑卷设备存放在/dev设备目录中（实际上是做了一个符号链接），同时会以卷组的名称来建立一个目录，其中保存了逻辑卷的设备映射文件（即/dev/卷组名称/逻辑卷名称）。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("mkfs.ext4 /dev/storage/vo\n")])])]),s("h4",{attrs:{id:"第5步-查看挂载状态-并写入到配置文件-使其永久生效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第5步-查看挂载状态-并写入到配置文件-使其永久生效"}},[t._v("#")]),t._v(" 第5步：查看挂载状态，并写入到配置文件，使其永久生效")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dev/storage/vo /linuxprobe ext4 defaults 0 0"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v("/etc/fstab\n")])])]),s("h3",{attrs:{id:"lvm扩容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lvm扩容"}},[t._v("#")]),t._v(" LVM扩容")]),t._v(" "),s("blockquote",[s("p",[t._v("扩展前请一定要记得卸载设备和挂载点的关联。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /linuxprobe\n")])])]),s("h4",{attrs:{id:"第一步-把上一个实验的逻辑卷扩容到290mb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-把上一个实验的逻辑卷扩容到290mb"}},[t._v("#")]),t._v(" 第一步 把上一个实验的逻辑卷扩容到290MB")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("lvextend -L 290M /dev/storage/vo\n")])])]),s("h4",{attrs:{id:"第二步-检查硬盘完整性-并充值硬盘容量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-检查硬盘完整性-并充值硬盘容量"}},[t._v("#")]),t._v(" 第二步  检查硬盘完整性，并充值硬盘容量")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("e2fsck -f /dev/storage/vo\nresize2fs /dev/storage/vo\n")])])]),s("h4",{attrs:{id:"第三步-重新挂载硬盘设备并检查挂载状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-重新挂载硬盘设备并检查挂载状态"}},[t._v("#")]),t._v(" 第三步 重新挂载硬盘设备并检查挂载状态")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" -a\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h\n")])])]),s("h3",{attrs:{id:"lvm缩容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lvm缩容"}},[t._v("#")]),t._v(" LVM缩容")]),t._v(" "),s("blockquote",[s("p",[t._v("缩容要先检查系统完整性，并且备份好磁盘数据")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /linuxprobe\n")])])]),s("h4",{attrs:{id:"第1步-检查文件系统的完整性。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第1步-检查文件系统的完整性。"}},[t._v("#")]),t._v(" 第1步：检查文件系统的完整性。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("e2fsck -f /dev/storage/vo\n")])])]),s("h4",{attrs:{id:"第2步-把逻辑卷vo的容量减小到120mb。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第2步-把逻辑卷vo的容量减小到120mb。"}},[t._v("#")]),t._v(" 第2步：把逻辑卷vo的容量减小到120MB。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("resize1fs /dev/storage/vo 120M\n")])])]),s("h4",{attrs:{id:"第3步-重新挂在磁盘检查状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第3步-重新挂在磁盘检查状态"}},[t._v("#")]),t._v(" 第3步 重新挂在磁盘检查状态")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" -a\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h\n")])])]),s("h2",{attrs:{id:"raid-独立冗余磁盘阵列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raid-独立冗余磁盘阵列"}},[t._v("#")]),t._v(" RAID(独立冗余磁盘阵列)")]),t._v(" "),s("blockquote",[s("p",[t._v("摘自《Linux就该这么学》")])]),t._v(" "),s("h3",{attrs:{id:"由来"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#由来"}},[t._v("#")]),t._v(" 由来")]),t._v(" "),s("p",[t._v("CPU性能高速增长，为磁盘性能提升优先，逐渐成为瓶颈，并且磁盘持续、频繁IO操作，损坏几率更大，数据丢失的几率也增加。")]),t._v(" "),s("p",[t._v("RAID技术通过把多个"),s("strong",[t._v("硬盘设备")]),t._v("组合成一个"),s("strong",[t._v("容量更大")]),t._v("、"),s("strong",[t._v("安全性更好")]),t._v("的磁盘阵列，并把数据切割成多个区段后分别存放在各个不同的物理硬盘设备上，然后利用"),s("strong",[t._v("分散读写")]),t._v("技术来"),s("strong",[t._v("提升磁盘阵列整体的性能")]),t._v("，同时把多个"),s("strong",[t._v("重要数据的副本")]),t._v("同步到不同的物理硬盘设备上，从而起到了非常好的数据"),s("strong",[t._v("冗余备份")]),t._v("效果。")]),t._v(" "),s("p",[t._v("缺点：数据多份，有成本。 但是数据本身价值更大，现代企业更看重冗余备份和带来的磁盘吞吐量的提升。")]),t._v(" "),s("h3",{attrs:{id:"raid-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raid-0"}},[t._v("#")]),t._v(" RAID 0")]),t._v(" "),s("p",[t._v("把多块物理硬盘设备（至少两块）串联在一起，组成一个大的卷组。")]),t._v(" "),s("p",[t._v("数据依次写入每个物理磁盘。")]),t._v(" "),s("p",[t._v("读写性能提升数倍，但是任意一个硬盘损坏，整个系统数据都被破坏。")]),t._v(" "),s("p",[t._v("提升吞吐速度，不具备数据容错能力")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-07-f568482573164a6f405df4a7b4592e38.png",alt:"image"}})]),t._v(" "),s("h3",{attrs:{id:"raid1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raid1"}},[t._v("#")]),t._v(" RAID1")]),t._v(" "),s("p",[t._v("RAID0 数据是分开存放的。")]),t._v(" "),s("p",[t._v("如果生产环境对硬盘设备的读写速度没有要求，而是希望增加数据的安全性时，就需要用到RAID1技术")]),t._v(" "),s("p",[t._v("如果，由两块以上的硬盘进行绑定，同时写入多块设备上，一块硬盘故障，会立即自动移热交换方式恢复数据")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-07-c722b4c4f17e63f221c1dfd2f7dbd46e.png",alt:"image"}})]),t._v(" "),s("p",[t._v("缺点：")]),t._v(" "),s("ol",[s("li",[t._v("磁盘利用率低下，上图只有50%")]),t._v(" "),s("li",[t._v("数据同时写入两块以上磁盘，增加系统负载")])]),t._v(" "),s("h3",{attrs:{id:"raid5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raid5"}},[t._v("#")]),t._v(" RAID5")]),t._v(" "),s("p",[t._v("RAID5技术虽然在理论上兼顾了三者（读写速度、数据安全性、成本），但实际上更像是对这三者的“相互妥协”")]),t._v(" "),s("p",[t._v("把硬盘设备的奇偶校验信息保存在其他硬盘设备中，好处是其中任何一块设备损坏后不至于出现致命缺陷。")]),t._v(" "),s("p",[t._v("并没有别分硬盘的真实数据，而是在硬盘损坏后通过奇偶校验信息尝试重建损坏的数据。")]),t._v(" "),s("p",[t._v("是一种妥协，坚固了读写速度、数据安全性和存储成本")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-07-3df65504fc8f8dfaf9b9de9daba29342.png",alt:"image"}})]),t._v(" "),s("h3",{attrs:{id:"raid10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raid10"}},[t._v("#")]),t._v(" RAID10")]),t._v(" "),s("p",[t._v("RAID5 是妥协")]),t._v(" "),s("p",[t._v("大部分企业更在乎的是数据本身的价值而非硬盘价格，因此生产环境中主要使用RAID10技术。")]),t._v(" "),s("p",[t._v("RAID10技术是RAID1+RAID0技术的一个“组合体”。")]),t._v(" "),s("p",[t._v("至少4块硬盘来组建，分别 两辆制作 RAID1磁盘阵列，保证"),s("strong",[t._v("数据安全性")])]),t._v(" "),s("p",[t._v("然后对两个RIAID1磁盘阵列试试RAID0技术，提升读写速度")]),t._v(" "),s("p",[t._v("只要不坏一个组所有硬盘，最多可以损坏百分之五十的硬盘不丢失数据")]),t._v(" "),s("p",[t._v("吸取了RAID0 高速读写 和 RAID1 数据安全的，不考虑成本下，性能超过RAID5")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.lovedata.net/21-01-07-f4677dbc1254051fd919379f6cc69400.png",alt:"image"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);